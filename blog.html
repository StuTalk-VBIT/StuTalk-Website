<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="STUTALK - THE VOICE OF VBITIAN'S">
    <title>StuTalk</title>
    <link rel="shortcut icon" href="images/Favicon/Fav.png" />
    <link rel="stylesheet" href="plugins/themefisher-font/style.css" />
    <link rel="stylesheet" href="plugins/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="plugins/animate-css/animate.css" />
    <link rel="stylesheet" href="plugins/magnific-popup/dist/magnific-popup.css" />
    <link rel="stylesheet" href="plugins/slick-carousel/slick/slick.css" />
    <link rel="stylesheet" href="plugins/slick-carousel/slick/slick-theme.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/customStyleAbout.css" />
    <style>
        .post-block {
            border: 1px solid #ddd;
            padding: 15px;
            background: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s;
        }
        .post-block:hover {
            transform: translateY(-10px);
        }
        .media-wrapper {
            margin-bottom: 15px;
        }
        .media-wrapper .item img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
        }
        .content h3 a {
            color: #333;
            text-decoration: none;
        }
        .content h3 a:hover {
            color: #e54029;
        }
        .btn-main {
            background-color: #e54029;
            color: #fff;
            border-radius: 3px;
            padding: 10px 20px;
            text-transform: uppercase;
        }
        .btn-main:hover {
            background-color: #d43f1b;
        }
        .pagination .active .page-link {
            background-color: #e54029;
            border-color: #e54029;
            color: #fff;
        }
    </style>
</head>
<body id="body" data-spy="scroll" data-target=".navbar" data-offset="50">
    <header id="navigation" class="navbar navigation custom-navbar">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand logo" href="#body">
                    <img src="images/logo.png" alt="Website Logo" />
                </a>
            </div>
            <nav class="collapse navbar-collapse navbar-right" role="Navigation">
                <ul id="nav" class="nav navbar-nav navigation-menu">
                    <li><a data-scroll href="./index.html">Home</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" style="background-color: #1d2024;">About Us <span class="caret"></span></a>
                        <ul class="dropdown-menu" style="background-color: black;">
                            <li><a data-scroll href="./about-us.html">Know Us</a></li>
                            <li><a href="./alumni.html#our-faculty">Our Team</a></li>
                            <li><a href="./alumni.html#alumni">Alumni</a></li>
                        </ul>
                    </li>
                    <li><a data-scroll href="./index.html#magazines">Magazines</a></li>
                    <li><a data-scroll href="./index.html#broadcast">Broadcast Journalism</a></li>
                    <li><a data-scroll href="./Saadhya.html">Saadhya</a></li>
                    <li><a class="active-page" data-scroll href="./blog.html">Blogs</a></li>
                    <li><a data-scroll href="#contact-us">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="blog" class="section" style="padding-top: 2%;">
        <div class="container">
            <div class="row">
                <div class="title text-center wow fadeInDown">
                    <h2>Blog <span class="color">Posts</span></h2>
                    <div class="border"></div>
                </div>
                <div id="blog-posts" class="row"></div>
            </div>
            <nav aria-label="Page navigation" class="text-center">
                <ul id="pagination" class="pagination pagination-lg"></ul>
            </nav>
        </div>
    </section>

    <section id="contact-us" class="contact-us section-bg" style="padding-top: 2%;">
        <div class="container">
            <div class="row text-center">
                <div class="contact-info col-md wow fadeInUp" data-wow-duration="500ms">
                    <h4 style="padding: 0.5%; margin: 0; color: black;">
                        <span style="color: #e54029;">Write to us at :</span>
                        <a href="mailto:vbit.stutalk@gmail.com" style="text-decoration: underline;">vbit.stutalk@gmail.com</a>
                    </h4>
                </div>
            </div>
            <div class="row">
                <div class="social-icon" style="padding: 0;">
                    <ul class="list-inline">
                        <li><a href="https://www.instagram.com/vbit.stutalk/"><i class="tf-ion-social-instagram-outline"></i></a></li>
                        <li><a href="https://www.youtube.com/channel/UCqsr0kgZjZnxQPV9i8UcX1A"><i class="tf-ion-social-youtube"></i></a></li>
                        <li><a href="https://www.linkedin.com/company/stutalk-vbit/"><i class="tf-ion-social-linkedin"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="plugins/jquery/dist/jquery.min.js"></script>
    <script src="plugins/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="plugins/slick-carousel/slick/slick.min.js"></script>
    <script src="plugins/filterzr/jquery.filterizr.min.js"></script>
    <script src="plugins/smooth-scroll/dist/js/smooth-scroll.min.js"></script>
    <script src="plugins/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu5nZKbeK-WHQ70oqOWo-_4VmwOwKP9YQ"></script>
    <script src="plugins/Sticky/jquery.sticky.js"></script>
    <script src="plugins/count-to/jquery.countTo.js"></script>
    <script src="plugins/wow/dist/wow.min.js"></script>
    <script src="js/script.js"></script>

    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCTKt6Q_faQ-bmKXuq8kvE9DlcsxhPc50U",
            authDomain: "stutalk-3a05c.firebaseapp.com",
            projectId: "stutalk-3a05c",
            storageBucket: "stutalk-3a05c.appspot.com",
            messagingSenderId: "745379808991",
            appId: "1:745379808991:web:30ae8dcdcb2b3d83ad4b6a",
            measurementId: "G-6522WFTXWB"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const postsPerPage = 6;
        let currentPage = 1;

        // Fetch and display blog posts
        function fetchBlogPosts(page) {
            const postsContainer = document.getElementById('blog-posts');
            postsContainer.innerHTML = '';

            const offset = (page - 1) * postsPerPage;

            db.collection("blogposts").orderBy("date", "desc").get().then((querySnapshot) => {
                const totalPosts = querySnapshot.size;
                const totalPages = Math.ceil(totalPosts / postsPerPage);

                console.log(`Total Posts: ${totalPosts}, Total Pages: ${totalPages}`);

                querySnapshot.docs.slice(offset, offset + postsPerPage).forEach((doc) => {
                    const postData = doc.data();
                    const postElement = document.createElement('div');
                    postElement.classList.add('col-md-4');
                    postElement.innerHTML = `
                        <div class="post-block">
                            <div class="media-wrapper">
                                <div class="item">
                                    <img src="${postData.imageURL}" alt="Post Image" />
                                </div>
                            </div>
                            <div class="content">
                                <h3><a href="blog-single.html?id=${doc.id}">${postData.title}</a></h3>
                                <p>${postData.excerpt}</p>
                                <a href="blog-single.html?id=${doc.id}" class="btn-main">Read More</a>
                            </div>
                        </div>
                    `;
                    postsContainer.appendChild(postElement);
                });

                generatePagination(totalPages);
            }).catch((error) => {
                console.error("Error fetching blog posts: ", error);
            });
        }

        // Generate pagination links
        function generatePagination(totalPages) {
            const paginationContainer = document.getElementById('pagination');
            paginationContainer.innerHTML = '';

            console.log(`Generating pagination for ${totalPages} pages`);

            for (let i = 1; i <= totalPages; i++) {
                const pageItem = document.createElement('li');
                pageItem.classList.add('page-item');
                if (i === currentPage) {
                    pageItem.classList.add('active');
                }
                pageItem.innerHTML = `<a class="page-link" href="#">${i}</a>`;
                pageItem.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentPage = i;
                    fetchBlogPosts(currentPage);
                });
                paginationContainer.appendChild(pageItem);
            }
        }

        window.onload = function() {
            fetchBlogPosts(currentPage);
        };
    </script>
</body>
</html>
